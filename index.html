<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>CALCULADORA CON BootStrap</title>

  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="icon" type="image/png" href="imagenes/favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


</head>

<body onload=limpiar(),encenderInicio()> <!-- Aqui pongo que al cargar la pagina llame a la funcion limpiar para que borre lo que haya en pantalla-->

	<div class="container">

		<div class="fondo" id="fondo">			

			<input type="text" class="pantalla" id="pantalla" value="">

			<!--<input type="text" id="pantalla" size="20" maxlength="20" value="0" style="background-color:#acff38;">-->	
		
         		<div class="calculadora_basica">

         			<!-- Abre calculadora de conversores -->		

					<input type=button name=type id='boton_conversor' class="botones_toggle_calculadora_avanzada_y_conversor" value='Con' onclick="muestraConversores('cal_conversor'),botonConversor()"> 

					<!-- Elementos de la calculadora conversores -->
					
	         		<div id="cal_conversor" onclick="botonConversor()"> <!-- Aqui le pongo que al pulsar en el div se esconda el propio div del conversor -->
	         		
						<p class="titulo_divisa_y_cambio_base">Conversor moneda</p>


							<!-- Seleccion de moneda 1 -->
							<label class="de" for="DE">DE</label>
						
							<select id="opcion1">
								<option class="opciones" value="euro">Euro</option>
								<option class="opciones" value="libra">Libra</option>
								<option class="opciones" value="dolar">Dolar</option>
								<option class="opciones" value="dolarM">Dolar mexicano</option>
								<option class="opciones" value="yenes">Yenes</option>				
							</select>

							<br>

							<!-- Seleccion de moneda 2 -->
							<label class="a" for="A">A</label>

							<select id="opcion2" onChange="calcular()">
								<option class="opciones" value="euro">Euro</option>
								<option class="opciones" value="libra">Libra</option>
								<option class="opciones" value="dolar">Dolar</option>
								<option class="opciones" value="dolarM">Dolar mexicano</option>
								<option class="opciones" value="yenes">Yenes</option>						
							</select>

							<button type="button" class="btn_calcular_divisa" onclick="calculaDivisa()">Calcular</button>
						<!-- <button type="button" class="btn_limpiar_divisa" onclick="limpiar()">Limpiar</button> -->  <!-- boton calcular que llama al metodo calcular() -->	
						<br>						

						<hr> <!-- Linea de separacion-->

						<p class="titulo_divisa_y_cambio_base">Cambio de base</p>

							<!-- Seleccion de moneda 1 -->
							<label class="de" for="DE">DE</label>
						
							<select id="opcion1_conversor">
								<option class="opciones" value="decimal" onclick="ocultar_digitos_hexadecimales()">Decimal</option>
								<option class="opciones" value="binario" onclick="ocultar_digitos_hexadecimales()">Binario</option>
								<option class="opciones" value="hexadecimal" onclick="mostrar_digitos_hexadecimales()">Hexadecimal</option>
											
							</select>

							<br>

							<!-- Seleccion de moneda 2 -->
							<label class="a" for="A">A</label>

							<select id="opcion2_conversor" onChange="calcular()">
								<option class="opciones" value="decimal">Decimal</option>
								<option class="opciones" value="binario">Binario</option>
								<option class="opciones" value="hexadecimal">Hexadecimal</option>					
							</select>

							<br>
				
								<!-- teclado secundario para introducir numeros Hexadecimales -->
								<div id="botonera_secundaria" class="botonera_secundaria"> <!-- este div (bloque cambio de base) permanece oculto mientra no se elija en el listado, hexadecimal -->

									<input type="button" class="btn_botonera_secundaria" name="0" value="0" onclick="introducirNumero(0)">
									<input type="button" class="btn_botonera_secundaria" name="1" value="1" onclick="introducirNumero(1)">
									<input type="button" class="btn_botonera_secundaria" name="2" value="2" onclick="introducirNumero(2)">
									<input type="button" class="btn_botonera_secundaria" name="3" value="3" onclick="introducirNumero(3)">
									<input type="button" class="btn_botonera_secundaria" name="4" value="4" onclick="introducirNumero(4)">

									<br>	

									<input type="button" class="btn_botonera_secundaria" name="5" value="5" onclick="introducirNumero(5)">
									<input type="button" class="btn_botonera_secundaria" name="6" value="6" onclick="introducirNumero(6)">
									<input type="button"  class="btn_botonera_secundaria" name="7" value="7" onclick="introducirNumero(7)">
									<input type="button"  class="btn_botonera_secundaria" name="8" value="8" onclick="introducirNumero(8)">
									<input type="button"  class="btn_botonera_secundaria" name="9" value="9" onclick="introducirNumero(9)">	

									<br>	

									<!-- aqui lo que hago es que hago una conversion de numeros a letras, es decir introduzco un numero pero el metodo introducirLetra tiene un swich y
									segun el numero introducido corresponde a una letra y esa letra la pone en la pantalla -->

									<input type="text" class="btn_botonera_secundaria" name="A" value="A" onclick="introducirLetra(1)">
									<input type="text" class="btn_botonera_secundaria" name="B" value="B" onclick="introducirLetra(2)">
									<input type="button" class="btn_botonera_secundaria" name="C" value="C" onclick="introducirLetra(3)">
									<input type="button" class="btn_botonera_secundaria" name="D" value="D" onclick="introducirLetra(4)">
									<input type="button" class="btn_botonera_secundaria" name="E" value="E" onclick="introducirLetra(5)">
									<input type="button" class="btn_botonera_secundaria" name="F" value="F" onclick="introducirLetra(6)">
									<input type="button" class="btn_botonera_secundaria" name="G" value="G" onclick="introducirLetra(7)">	

									<br>
									
								</div>	

						<button type="button" class="btn_calcular_conversor" onclick="calculaConversor()">Calcular</button> <!-- boton calcular que llama al metodo calcular() -->
												
	         		</div> <!-- finaliza el bloque para calcular hexadecial-->

	         		<!-- Boton abre calculadora avanzada -->
					 
					<button onclick="avanzada()" type="button" id="avanzada" class="botones_toggle_calculadora_avanzada_y_conversor">Av</button>

					<!-- borrar ultimo digito -->					

					<button class="btn fas fa-arrow-left" id="btnDel" value="" onclick="retroceso()"></button>
					<!-- <input type="Button"  class="fas fa-arrow-left" style="color:green !important" value="" onclick="retroceso()"> -->

					<!-- borra todos los digitos -->
					
					<input type="button" id="btnce" class="btn"  value="CE" onclick="limpiar(),mensaje()">					

					<br>

					<!-- Elementos de la calculadora avanzada -->
					<div id="cal_avanzada" class="calculadora_avanzada">

						<input type="button" class="btn botones_calculadora_avanzada_y_conversor_tipo2"  name="(" value="("  onclick="introducirNumero('(')">
						<input type="button" class="btn botones_calculadora_avanzada_y_conversor_tipo2"  name=")" value=")"  onclick="introducirNumero(')')">
						<input type="button" class="btn botones_calculadora_avanzada_y_conversor_tipo2"  name="√" value="√"  onclick="raiz()">
						<input type="button" class="btn botones_calculadora_avanzada_y_conversor_tipo2"  name="x2" value="x2"  onclick="potencia()">
						
						</div>

						<input type="button" id="btn7" class="btn" name="7" value="7" onclick="introducirNumero(7)">
						<input type="button" id="btn8" class="btn" name="8" value="8" onclick="introducirNumero(8)">
						<input type="button" id="btn9" class="btn" name="9" value="9" onclick="introducirNumero(9)">
						<input type="button" id="btnDiv" class="btn" name="/" value="/" onclick="introducirNumero('/')">			

						
						<br>

						<input type="button" id="btn4" class="btn" name="4" value="4" onclick="introducirNumero(4)">
						<input type="button" id="btn5" class="btn" name="5" value="5" onclick="introducirNumero(5)">
						<input type="button" id="btn6" class="btn" name="6" value="6" onclick="introducirNumero(6)">
						<input type="button" id="btnMult" class="btn" name="X" value="x" onclick="introducirNumero('*')">

				
						<br>

						<input type="button" id="btn1" class="btn" name="1" value="1" onclick="introducirNumero(1)">
						<input type="button" id="btn2" class="btn" name="2" value="2" onclick="introducirNumero(2)">
						<input type="button" id="btn3" class="btn" name="3" value="3" onclick="introducirNumero(3)">
						<input type="button" id="btnRest"class="btn" name="-" value="-" onclick="introducirNumero('-')">
												
				
						<br>

						<input type="button" id="btn0" class="btn" name="0" value="0" onclick="introducirNumero(0)">
						<input type="button" id="btnComa" class="btn" name="," value="," onclick="introducirNumero('.')">
						<input type="button" id="btnIgual" class="btn boton_igual" name="=" value="=" onclick="calculo()">	
						<input type="button" id="btnSum" class="btn" name="+" value=" +  " onclick="introducirNumero('+')">	

							
					<br>

					<!-- Boton de encendido y apagado -->

					<img id="boton_on" class="boton_on_off" alt="" src="imagenes/botonOff.png" onmouseover="this.style.cursor='pointer'" onclick="cambia_imagen(),encender()"/>			


					<br>
			
				</div>
		</div>

	</div>


<!-- Metodos Javascript -->
	<script language="javascript" type="text/javascript">

		// PARA HACER APARECER EL CONVERSOR

		function muestraConversores(id) {
		if(document.getElementById('boton_conversor').value=='Cerrar'){

		document.getElementById('boton_conversor').value = 'Con';
		document.getElementById(id).style.display = 'none';

		}else{
		document.getElementById('boton_conversor').value = 'Cerrar';
		document.getElementById(id).style.display = 'inline';
		}
		}


		// Pone el numero en pantalla
		function introducirNumero(numero) {
		   document.getElementById('pantalla').value = document.getElementById('pantalla').value + numero; // Le digo con num entre parentesis en la funcion, que el valor de la pantalla sea su valor actual mas el numero que aparece y asi para todos los que vayamos introduciendo
		}

		// Pone letras en pantalla PARA LOS HEXADECIMALES
		function introducirLetra(letra) {

			switch (letra) {
				case 1:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "A";
					break;
				case 2:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "B";
					break;

				case 3:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "C";
					break;

				case 4:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "D";
					break;

				case 5:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "E";
					break;

				case 6:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "F";
					break;

				case 7:
					document.getElementById('pantalla').value = document.getElementById('pantalla').value + "G";
					break;
									
			}				   
		}


		// Limpia o borra la pantalla
		function limpiar() {
		   document.getElementById('pantalla').value= " "; // Borro cualquier numero que haya en pantalla
		}

		// Mensaje que aparece al borrar la pantalla
		function mensaje() {
		   document.getElementById('pantalla').value= " Borrando... "; // Mostro mensaje
		   setTimeout("limpiar()",500); // y borro la pantalla 1 sg depsues

		}

		// Para borrar el ultimo digito de la pantalla
		function retroceso() {
		   	var valor_pantalla = pantalla.value; // Esta nueva variable recoge el valor de la pantalla. donde pone pantalla es el id de la pantalla

    		var nuevo_valor = valor_pantalla.substring(0,valor_pantalla.length - 1); // Aqui creo otra variable y le digo que:
    		// Con substring le digo que me muestre todos los caracteres del valor actual d ela pantalla desde el caracter 0 hasta el ultimo menos 1 (0,valor_pantalla.length - 1)
    		
    		pantalla.value = nuevo_valor; // por ultimo le digo que el valor de la pantalla ahora sea el valor de a nueva variable
		}

		// Realiza la operacion de suma, resta, multiplicacion, division,
		function calculo() {

			// Aqui hago lo siguiente, y es que uso la funcion eval, la cual es capaz de operar con una serie de caracteres, por tanto con poner
			// document.getElementById('pantalla').value = eval(document.getElementById('pantalla').value); le estamos diciendo que el resultado de la pantalla,
			// es igual a lo que calcule eval dentro de ella segun los numeros y caracteres, por tanto, si hemos entroducido 2+3, reconoce tanto numero como simbolo y realiza el calculo

			// Pero si cuando la pantalla esta sin ningun numero pulsamos el boton igual, va a calcular lo que hay que es nada, por tanto, aparece la palabra undefined, osea nulo,
			// asi que para evitarlo, le decimos que si eval(document.getElementById('pantalla').value)==null, osea que si el resultado de eval es nulo, entonces, que muestre
			// lo que haya, es decir nada, pero si hay valores, entonces que realice eval el calculo segun la cadena de valores

			if(eval(document.getElementById('pantalla').value)==null) { //cuando le demos al boton igual, si no hay nada escrito, que no salga la palabra undefined y ponga lo mismo que habia osea nada
				document.getElementById('pantalla').value = document.getElementById('pantalla').value;
			} else {
			document.getElementById('pantalla').value = eval(document.getElementById('pantalla').value);
			}
	

		}

		// Metodos de la calculadora AVANZADA

		// Con esto calculo la raiz cuadrada
		function raiz() {
			document.getElementById('pantalla').value = Math.sqrt(document.getElementById('pantalla').value); 
		}

		// Aqui calculo la raiz cuadrada
		function potencia() {
			document.getElementById('pantalla').value = Math.pow(document.getElementById('pantalla').value, 2);
		}

		// FUNCIONES CONVERSOR

		function calculaDivisa(){

			var cantidad_divisa = document.getElementById("pantalla").value; // Recojo el valor de la cantidad
			var opcion1 = document.getElementById("opcion1").value; // Aqui recojo el valor de la seleccion 1
			var opcion2 = document.getElementById("opcion2").value; // Aqui recojo el valor de la seleccion 2

			  	if( (cantidad_divisa - 0) != cantidad_divisa && (''+cantidad_divisa).replace(/^\s+|\s+$/g, "").length > 0)
				    {
				      alert("Ingrese numeros");
				      return false;
				} else{

					if(opcion1=="euro"&&opcion2=="euro"){
						document.getElementById("pantalla").value = cantidad_divisa;
						muestraConversores('cal_conversor'); // Cierra bloque de conversores

					} else if(opcion1=="euro"&&opcion2=="libra"){
						document.getElementById("pantalla").value = (cantidad_divisa * 0.88).toFixed(2) + " £";
						muestraConversores('cal_conversor');		

					} else if  (opcion1=="euro"&&opcion2=="dolar"){
						document.getElementById("pantalla").value = (cantidad_divisa * 1.15).toFixed(2) + " $";
						muestraConversores('cal_conversor');	

					} else if  (opcion1=="euro"&&opcion2=="dolarM"){
						document.getElementById("pantalla").value = (cantidad_divisa * 21.82).toFixed(2) + " $X";
						muestraConversores('cal_conversor');	

					} else if  (opcion1=="euro"&&opcion2=="yenes"){
						document.getElementById("pantalla").value = (cantidad_divisa * 125.24).toFixed(2) + " Y";
						muestraConversores('cal_conversor');	
				}	
	    
    		}
		}


		function calculaConversor(){

			
			var tipo1_conversor = document.getElementById("opcion1_conversor").value; // Aqui recojo el valor de la seleccion 1
			var tipo2_conversor = document.getElementById("opcion2_conversor").value; // Aqui recojo el valor de la seleccion 2

			 
					if(tipo1_conversor=="decimal"&&tipo2_conversor=="decimal"){
						document.getElementById("pantalla").value = document.getElementById("pantalla").value;
						muestraConversores('cal_conversor'); // Cierra bloque de conversores

					} else if(tipo1_conversor=="decimal"&&tipo2_conversor=="binario"){

					// Le digo que el valor de la pantalla va a ser el valr de la pantalla convertido a float con parseFloat, y despues con toString y 2 como valor de la base, obtenemos
					// el numero convertido a Binario. 
					
						document.getElementById('pantalla').value = parseFloat(document.getElementById('pantalla').value).toString(2);	
						muestraConversores('cal_conversor'); // Cierra bloque de conversores

					} else if(tipo1_conversor=="decimal"&&tipo2_conversor=="hexadecimal"){


					// Le digo que el valor de la pantalla va a ser el valr de la pantalla convertido a float con parseFloat, y despues con toString y 16 como valor de la base, obtenemos
					// el numero convertido a Hexadecimal, 					

						document.getElementById('pantalla').value = parseInt(document.getElementById('pantalla').value).toString(16);	
						muestraConversores('cal_conversor'); // Cierra bloque de conversores

					} else if(tipo1_conversor=="binario"&&tipo2_conversor=="decimal"){

						document.getElementById('pantalla').value = parseInt(document.getElementById('pantalla').value, 2);	
						muestraConversores('cal_conversor'); // Cierra bloque de conversores			

					} else if(tipo1_conversor=="binario"&&tipo2_conversor=="binario"){

						document.getElementById('pantalla').value = document.getElementById('pantalla').value;
						muestraConversores('cal_conversor'); // Cierra bloque de conversores		

					} else if(tipo1_conversor=="binario"&&tipo2_conversor=="hexadecimal"){

						document.getElementById('pantalla').value = parseInt(document.getElementById('pantalla').value , 2).toString(16).toUpperCase();	
						muestraConversores('cal_conversor'); // Cierra bloque de conversores				

					} else if(tipo1_conversor=="hexadecimal"&&tipo2_conversor=="decimal"){

						document.getElementById('pantalla').value = parseInt(document.getElementById('pantalla').value, 16);	
						muestraConversores('cal_conversor'); // Cierra bloque de conversores			

					} else if(tipo1_conversor=="hexadecimal"&&tipo2_conversor=="binario"){

						document.getElementById('pantalla').value = parseInt(document.getElementById('pantalla').value, 16).toString(2).substr(-8);
						muestraConversores('cal_conversor'); // Cierra bloque de conversores		

					} else if(tipo1_conversor=="hexadecimal"&&tipo2_conversor=="hexadecimal"){

						document.getElementById('pantalla').value = document.getElementById('pantalla').value
						muestraConversores('cal_conversor'); // Cierra bloque de conversores				

					}

	    
    		}
		
		// Para mostrar digitos para introducir hexadecimales
	    function mostrar_digitos_hexadecimales(){
	     	document.getElementById("botonera_secundaria").style.display = "inline"; // muestro los digitos para operar con hexadecimales
	    }

	    function ocultar_digitos_hexadecimales(){
	      	document.getElementById("botonera_secundaria").style.display = "none"; // oculto los digitos para operar con hexadecimales
	    }

	      // Hace aparecer la calculadora avanzada y cambia boton de color si esta activada
		var flag =1; //Aqui creo una variable boolean
		var style = document.getElementById('avanzada');  //Aqui creo una variable para cambio de estilo
		function avanzada() {
			if (flag==1){ //Si es 1 lo muestra
				document.getElementById('cal_avanzada').style.display="block"; // Aparece calculadora avanzada
				flag=0; // Aqui le decimos que cuando pinchemos de nuevo, vuelva al estado inicial
				style.classList.add('botones_toggle_calculadora_avanzada_y_conversor_activados'); //  Cambia el estilo del boton 
			
			} else {
				document.getElementById('cal_avanzada').style.display="none"; // Desaparece calculadora avanzada
				flag=1;
				style.classList.remove('botones_toggle_calculadora_avanzada_y_conversor_activados'); // Vuelve al estilo inicial del boton 	
			}
		}



		// Cambia el color del boton Conversor cuando esta activado
		function botonConversor() {
		    document.getElementById("boton_conversor").classList.toggle("botones_toggle_calculadora_avanzada_y_conversor_activados");
		    document.getElementById("boton_conversor").classList.toggle("botones_toggle_calculadora_avanzada_y_conversor");
		}



		// Cambiar imagen boton on a off y viceversa
	   	function cambia_imagen() {
	        var img = document.getElementById('boton_on').src;
	        if (img.indexOf('imagenes/botonOff.png')!=-1) {
	            document.getElementById('boton_on').src  = 'imagenes/botonOn.png';
	        }
	         else {
	           document.getElementById('boton_on').src = 'imagenes/botonOff.png';
	       }

	    }


		// Para encender la pantalla y los botonos, se activa al abrir la pagina, y tambien cuando pulsamos el boton toggle de on-off,
		// asi le asignamos la class que tendrá en cada posicion del toggle. Tambien la uso para borrar la pantalla al encender o apagar

		function encender() {

			document.getElementById('pantalla').value= " "; // con esto borro la pantalla al apagar la calculadora y si ante sd enecenderla hay algo escrito igualmente lo borro

		    document.getElementById("pantalla").classList.toggle("pantalla_activada"); // al darle al boton encender, a la pantalla LCD que tiene un id=pantalla,
		    // le cambio la class actual inicial llamada pantalla por la class pantalla_activada
		    document.getElementById("pantalla").classList.toggle("pantalla"); // pero si vuelvo a pinchar el boton, cambio de la class pantalla_activada que tenia asignada a la class inicial pantalla
		    
		    document.getElementById("fondo").classList.toggle("fondo_activado");
		    document.getElementById("fondo").classList.toggle("fondo");

		    document.getElementById("btn1").classList.toggle("btn_activado");
		    document.getElementById("btn1").classList.toggle("btn");

		   	document.getElementById("btn2").classList.toggle("btn_activado");
		    document.getElementById("btn2").classList.toggle("btn");

		    document.getElementById("btn3").classList.toggle("btn_activado");
		    document.getElementById("btn3").classList.toggle("btn");

		    document.getElementById("btn4").classList.toggle("btn_activado");
		    document.getElementById("btn4").classList.toggle("btn");

		    document.getElementById("btn5").classList.toggle("btn_activado");
		    document.getElementById("btn5").classList.toggle("btn");

		    document.getElementById("btn6").classList.toggle("btn_activado");
		    document.getElementById("btn6").classList.toggle("btn");

		    document.getElementById("btn7").classList.toggle("btn_activado");
		    document.getElementById("btn7").classList.toggle("btn");

		    document.getElementById("btn8").classList.toggle("btn_activado");
		    document.getElementById("btn8").classList.toggle("btn");

		    document.getElementById("btn9").classList.toggle("btn_activado");
		    document.getElementById("btn9").classList.toggle("btn");

		    document.getElementById("btn0").classList.toggle("btn_activado");
		    document.getElementById("btn0").classList.toggle("btn");

		    document.getElementById("btnComa").classList.toggle("btn_activado");
		    document.getElementById("btnComa").classList.toggle("btn");

		    document.getElementById("btnDel").classList.toggle("btndel_activado");
		    document.getElementById("btnDel").classList.toggle("btn");

		    document.getElementById("btnce").classList.toggle("btnce_activado");
		    document.getElementById("btnce").classList.toggle("btn");

		    document.getElementById("btnIgual").classList.toggle("btnigual_activado");
		    document.getElementById("btnIgual").classList.toggle("btn"); 
		

		}

		// Para encender pantalla al abrir la pagina el cual llama al metodo encender()
		function encenderInicio() {
		  
		   setTimeout("encender()",1000); // Llama a la funcion encender 1 sg despues de abrir la pagina, por eso en body ponemos <body onload="encender()"
		   setTimeout("cambia_imagen()",1000) // Llama a la funcion cambia_imagen 1 sg despues de abrir la pagina, por tanto en body onload="cambia_imagen()"

		}

		</script>



</body>
</html>